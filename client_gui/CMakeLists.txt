cmake_minimum_required(VERSION 3.1 FATAL_ERROR)
project(client_gui)
set (CMAKE_CXX_STANDARD 11)
find_package(open62541 REQUIRED)
find_package(Qt5Widgets)
include_directories(${PROJECT_SOURCE_DIR}/include)
include_directories(${PROJECT_SOURCE_DIR}/../common)
include_directories (${PROJECT_BINARY_DIR})
#set(CMAKE_AUTOMOC ON)
set(CMAKE_INCLUDE_CURRENT_DIR ON)
#set(CMAKE_AUTOUIC ON)

file(GLOB COMMON_SOURCES ../common/*.cpp)
file(GLOB SOURCES ${PROJECT_SOURCE_DIR}/src/*.cpp)
file(GLOB FORMS ${PROJECT_SOURCE_DIR}/forms/*.ui)
file(GLOB HEADERS ${PROJECT_SOURCE_DIR}/include/*.h)
qt5_wrap_cpp(H_MOC ${HEADERS})
qt5_wrap_ui(UI_MOC ${FORMS})
add_library(CLIENT_LIB  ${SOURCES} ${H_MOC} ${UI_MOC})
target_link_libraries(CLIENT_LIB Qt5::Widgets)
add_executable(client_gui ${PROJECT_SOURCE_DIR}/main.cpp ${SOURCES} ${COMMON_SOURCES})
target_link_libraries(client_gui  CLIENT_LIB open62541::open62541)